!function(factory){"object"==typeof module&&"object"==typeof module.exports?factory(require("jquery")):"function"==typeof define&&define.amd?define([],factory(window.jQuery)):factory(window.jQuery)}((function($){if(!$)return console.warn("Unslider needs jQuery");$.Unslider=function(context,options){var self=this;return self._="unslider",self.defaults={autoplay:!1,delay:3e3,speed:750,easing:"swing",keys:{prev:37,next:39},nav:!0,pause:!0,arrows:{prev:'<a class="'+self._+'-arrow prev"></a>',next:'<a class="'+self._+'-arrow next"></a>'},animation:"horizontal",selectors:{container:"ul:first",slides:"li"},animateHeight:!1,activeClass:self._+"-active",swipe:!0,swipeThreshold:.2},self.$context=context,self.options={},self.$parent=null,self.$container=null,self.$slides=null,self.$nav=null,self.$arrows=[],self.total=0,self.current=0,self.prefix=self._+"-",self.eventSuffix="."+self.prefix+~~(2e3*Math.random()),self.interval=[],self.init=function(options){return self.options=$.extend({},self.defaults,options),self.$container=self.$context.find(self.options.selectors.container).addClass(self.prefix+"wrap"),self.$slides=self.$container.children(self.options.selectors.slides),self.setup(),$.each(["nav","arrows","keys","infinite"],(function(index,module){self.options[module]&&self["init"+$._ucfirst(module)]()})),jQuery.event.special.swipe&&self.options.swipe&&self.initSwipe(),self.options.autoplay&&self.start(),self.calculateSlides(),self.$context.trigger(self._+".ready"),self.animate(self.options.index||self.current,"init")},self.setup=function(){var position;self.$context.addClass(self.prefix+self.options.animation).wrap('<div class="'+self._+'" />'),self.$parent=self.$context.parent("."+self._),"static"===self.$context.css("position")&&self.$context.css("position","relative"),self.$context.css("overflow","hidden")},self.calculateSlides=function(){if(self.$slides=self.$container.children(self.options.selectors.slides),self.total=self.$slides.length,"fade"!==self.options.animation){var prop="width";"vertical"===self.options.animation&&(prop="height"),self.$container.css(prop,100*self.total+"%").addClass(self.prefix+"carousel"),self.$slides.css(prop,100/self.total+"%")}},self.start=function(){return self.interval.push(setTimeout((function(){self.next()}),self.options.delay)),self},self.stop=function(){for(var timeout;timeout=self.interval.pop();)clearTimeout(timeout);return self},self.initNav=function(){var $nav=$('<nav class="'+self.prefix+'nav"><ol /></nav>');self.$slides.each((function(key){var label=this.getAttribute("data-nav")||key+1;$.isFunction(self.options.nav)&&(label=self.options.nav.call(self.$slides.eq(key),key,label)),$nav.children("ol").append('<li data-slide="'+key+'">'+label+"</li>")})),self.$nav=$nav.insertAfter(self.$context),self.$nav.find("li").on("click"+self.eventSuffix,(function(){var $me=$(this).addClass(self.options.activeClass);$me.siblings().removeClass(self.options.activeClass),self.animate($me.attr("data-slide"))}))},self.initArrows=function(){!0===self.options.arrows&&(self.options.arrows=self.defaults.arrows),$.each(self.options.arrows,(function(key,val){self.$arrows.push($(val).insertAfter(self.$context).on("click"+self.eventSuffix,self[key]))}))},self.initKeys=function(){!0===self.options.keys&&(self.options.keys=self.defaults.keys),$(document).on("keyup"+self.eventSuffix,(function(e){$.each(self.options.keys,(function(key,val){e.which===val&&$.isFunction(self[key])&&self[key].call(self)}))}))},self.initSwipe=function(){var width=self.$slides.width();"fade"!==self.options.animation&&self.$container.on({movestart:function(e){if(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)return!!e.preventDefault();self.$container.css("position","relative")},move:function(e){self.$container.css("left",-100*self.current+100*e.distX/width+"%")},moveend:function(e){Math.abs(e.distX)/width>self.options.swipeThreshold?self[e.distX<0?"next":"prev"]():self.$container.animate({left:-100*self.current+"%"},self.options.speed/2)}})},self.initInfinite=function(){var pos=["first","last"];$.each(pos,(function(index,item){self.$slides.push.apply(self.$slides,self.$slides.filter(':not(".'+self._+'-clone")')[item]().clone().addClass(self._+"-clone")["insert"+(0===index?"After":"Before")](self.$slides[pos[~~!index]]()))}))},self.destroyArrows=function(){$.each(self.$arrows,(function(i,$arrow){$arrow.remove()}))},self.destroySwipe=function(){self.$container.off("movestart move moveend")},self.destroyKeys=function(){$(document).off("keyup"+self.eventSuffix)},self.setIndex=function(to){return to<0&&(to=self.total-1),self.current=Math.min(Math.max(0,to),self.total-1),self.options.nav&&self.$nav.find('[data-slide="'+self.current+'"]')._active(self.options.activeClass),self.$slides.eq(self.current)._active(self.options.activeClass),self},self.animate=function(to,dir){if("first"===to&&(to=0),"last"===to&&(to=self.total),isNaN(to))return self;self.options.autoplay&&self.stop().start(),self.options.pause&&self.$slides.hover((function(){self.stop()}),(function(){self.stop().start()})),self.setIndex(to),self.$context.trigger(self._+".change",[to,self.$slides.eq(to)]);var fn="animate"+$._ucfirst(self.options.animation);return $.isFunction(self[fn])&&self[fn](self.current,dir),self},self.next=function(){var target=self.current+1;return target>=self.total&&(target=0),self.animate(target,"next")},self.prev=function(){return self.animate(self.current-1,"prev")},self.animateHorizontal=function(to){var prop="left";return"rtl"===self.$context.attr("dir")&&(prop="right"),self.options.infinite&&self.$container.css("margin-"+prop,"-100%"),self.slide(prop,to)},self.animateVertical=function(to){return self.options.animateHeight=!0,self.options.infinite&&self.$container.css("margin-top",-self.$slides.outerHeight()),self.slide("top",to)},self.slide=function(prop,to){var dummy;(self.animateHeight(to),self.options.infinite)&&(to===self.total-1&&(dummy=self.total-3,to=-1),to===self.total-2&&(dummy=0,to=self.total-2),"number"==typeof dummy&&(self.setIndex(dummy),self.$context.on(self._+".moved",(function(){self.current===dummy&&self.$container.css(prop,-100*dummy+"%").off(self._+".moved")}))));var obj={};return obj[prop]=-100*to+"%",self._move(self.$container,obj)},self.animateFade=function(to){self.animateHeight(to);var $active=self.$slides.eq(to).addClass(self.options.activeClass);self._move($active.siblings().removeClass(self.options.activeClass),{opacity:0}),self._move($active,{opacity:1},!1)},self.animateHeight=function(to){self.options.animateHeight&&self._move(self.$context,{height:self.$slides.eq(to).outerHeight()},!1)},self._move=function($el,obj,callback,speed){return!1!==callback&&(callback=function(){self.$context.trigger(self._+".moved")}),$el._move(obj,speed||self.options.speed,self.options.easing,callback)},self.init(options)},$.fn._active=function(className){return this.addClass(className).siblings().removeClass(className)},$._ucfirst=function(str){return(str+"").toLowerCase().replace(/^./,(function(match){return match.toUpperCase()}))},$.fn._move=function(){return this.stop(!0,!0),$.fn[$.fn.velocity?"velocity":"animate"].apply(this,arguments)},$.fn.unslider=function(opts){return this.each((function(index,elem){var $this=$(elem),unslider;if(!($(elem).data("unslider")instanceof $.Unslider)){if("string"==typeof opts&&$this.data("unslider")){opts=opts.split(":");var call=$this.data("unslider")[opts[0]];if($.isFunction(call))return call.apply($this,opts[1]?opts[1].split(","):null)}return $this.data("unslider",new $.Unslider($this,opts))}}))}}));